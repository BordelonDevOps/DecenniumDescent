<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Decennium Descent Cosmology - Planar Rings</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600&display=swap');
    
    body {
      margin: 0;
      overflow: hidden;
      background: 
        radial-gradient(ellipse at 20% 80%, rgba(120, 0, 120, 0.3) 0%, transparent 50%),
        radial-gradient(ellipse at 80% 20%, rgba(0, 100, 200, 0.3) 0%, transparent 50%),
        radial-gradient(ellipse at 40% 40%, rgba(200, 0, 100, 0.2) 0%, transparent 50%),
        linear-gradient(135deg, #0a0a1a 0%, #1a0a2a 50%, #000000 100%);
      font-family: 'Cinzel', serif;
      cursor: grab;
    }
    
    body:active {
      cursor: grabbing;
    }
    
    #tooltip {
      position: absolute;
      color: white;
      background: rgba(0,0,0,0.9);
      padding: 12px 16px;
      border-radius: 8px;
      pointer-events: none;
      z-index: 10;
      display: none;
      max-width: 300px;
      backdrop-filter: blur(10px);
      font-size: 14px;
      line-height: 1.4;
      box-shadow: 0 0 30px rgba(0,0,0,0.8);
    }
    
    .tooltip-celestial {
      border: 2px solid #ffd700;
      box-shadow: 0 0 20px rgba(255, 215, 0, 0.6), inset 0 0 20px rgba(255, 215, 0, 0.1);
    }
    
    .tooltip-infernal {
      border: 2px solid #ff4444;
      box-shadow: 0 0 20px rgba(255, 68, 68, 0.6), inset 0 0 20px rgba(255, 68, 68, 0.1);
    }
    
    .tooltip-elemental {
      border: 2px solid #66ccff;
      box-shadow: 0 0 20px rgba(102, 204, 255, 0.6), inset 0 0 20px rgba(102, 204, 255, 0.1);
    }
    
    .tooltip-primordial {
      border: 2px solid #cc66ff;
      box-shadow: 0 0 20px rgba(204, 102, 255, 0.6), inset 0 0 20px rgba(204, 102, 255, 0.1);
    }
    
    .tooltip-material {
      border: 2px solid #00ccff;
      box-shadow: 0 0 25px rgba(0, 204, 255, 0.8), inset 0 0 20px rgba(0, 204, 255, 0.2);
    }
    
    .tooltip-oblivion {
      border: 2px solid #666;
      box-shadow: 0 0 20px rgba(100, 0, 100, 0.8), inset 0 0 20px rgba(0, 0, 0, 0.5);
      background: rgba(20, 0, 30, 0.95);
    }
    
    canvas {
      display: block;
    }
    
    #info {
      position: absolute;
      top: 20px;
      left: 20px;
      color: rgba(255, 255, 255, 0.9);
      font-size: 12px;
      z-index: 5;
      text-shadow: 0 0 10px rgba(0,0,0,0.8);
    }
    
    #ring-labels {
      position: absolute;
      top: 20px;
      right: 20px;
      color: rgba(255, 255, 255, 0.8);
      font-size: 11px;
      z-index: 5;
      text-align: right;
      text-shadow: 0 0 10px rgba(0,0,0,0.8);
    }
    
    .ring-label {
      margin-bottom: 8px;
      padding: 4px 8px;
      background: rgba(0,0,0,0.3);
      border-radius: 4px;
      border-left: 3px solid;
    }
    
    .celestial-label { border-left-color: #ffd700; }
    .elemental-label { border-left-color: #66ccff; }
    .infernal-label { border-left-color: #ff4444; }
    .primordial-label { border-left-color: #cc66ff; }
  </style>
</head>
<body>
  <div id="tooltip"></div>
  <div id="info">
    <div><strong>Decennium Descent Cosmology</strong></div>
    <div>Drag to rotate • Scroll to zoom • Space to pause</div>
    <div>Hover for planar lore</div>
  </div>
  
  <div id="ring-labels">
    <div class="ring-label celestial-label">Celestial Planes</div>
    <div class="ring-label elemental-label">Elemental Planes</div>
    <div class="ring-label primordial-label">Primordial Forces</div>
    <div class="ring-label infernal-label">Infernal Realms</div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script>
    // ===== ENHANCED COSMOLOGY CONFIG =====
    const COSMOLOGY_CONFIG = {
      // Central Material Plane
      material_plane: {
        name: "Material Plane",
        type: "material",
        color: 0x4fc3f7,
        radius: 4.0,
        position: { x: 0, y: 0, z: 0 },
        description: "The nexus of all existence, where mortal souls dwell and the planes converge. Here, the fundamental forces of reality intermingle to create the physical universe.",
        texture: "earth"
      },
      
      // Inner Elemental Ring
      elemental_ring: [
        { 
          name: "Plane of Fire", 
          color: 0xff6b35, 
          radius: 2.2, 
          orbitRadius: 25, 
          speed: 0.0064,
          description: "Domain of eternal flame and scorching winds. Here, the salamanders dance in rivers of lava, and the very air burns with creative passion.",
          texture: "fire"
        },
        { 
          name: "Plane of Water", 
          color: 0x29b6f6, 
          radius: 2.2, 
          orbitRadius: 30, 
          speed: 0.0048,
          description: "Infinite oceans of purest water, where marid nobles rule coral cities and the tides carry whispers between worlds.",
          texture: "water"
        },
        { 
          name: "Plane of Air", 
          color: 0xe1f5fe, 
          radius: 2.2, 
          orbitRadius: 35, 
          speed: 0.0056,
          description: "Boundless skies and eternal winds, where djinn palaces float on clouds and storms rage for millennia.",
          texture: "air"
        },
        { 
          name: "Plane of Earth", 
          color: 0x8d6e63, 
          radius: 2.2, 
          orbitRadius: 28, 
          speed: 0.004,
          description: "Solid stone and precious metals form endless caverns where dao merchants trade in gems worth kingdoms.",
          texture: "earth"
        }
      ],
      
      // Primordial Outer Ring (3 fixed + Chaos wandering)
      primordial_ring: [
        { 
          name: "Plane of Order", 
          color: 0xb39ddb, 
          radius: 2.8, 
          orbitRadius: 60, 
          speed: 0.0008,
          angleOffset: 0,
          description: "Perfect geometric harmony and absolute law. Every atom vibrates in mathematical precision, creating reality's underlying structure."
        },
        { 
          name: "Plane of Life", 
          color: 0xa5d6a7, 
          radius: 2.8, 
          orbitRadius: 65, 
          speed: 0.00064,
          angleOffset: Math.PI/2,
          description: "The wellspring of all living energy. Infinite forests grow and die in moments, as the cycle of life accelerates beyond mortal comprehension."
        },
        { 
          name: "Plane of Discord", 
          color: 0xffab91, 
          radius: 2.8, 
          orbitRadius: 65, 
          speed: 0.00064,
          angleOffset: -Math.PI/2,
          description: "Where conflict is born and strife takes form. Not evil, but necessary opposition - the force that prevents stagnation."
        }
      ],
      
      // Plane of Chaos (chaotic wandering)
      plane_of_chaos: {
        name: "Plane of Chaos",
        type: "primordial",
        color: 0xf48fb1,
        radius: 2.8,
        chaotic: true,
        chaoticRange: 95,
        chaoticSpeed: 0.003,
        description: "Pure entropy and creative destruction. Reality reshapes itself constantly as this plane wanders chaotically through the cosmos, avoiding all collisions through pure impossibility."
      },
      
      // Middle Celestial Ring
      celestial_ring: [
        { name: "Mount Celestia", color: 0xffd700, radius: 2.0, orbitRadius: 45, speed: 0.0024 },
        { name: "Bytopia", color: 0xffeb3b, radius: 1.8, orbitRadius: 50, speed: 0.0032 },
        { name: "Elysium", color: 0xe8f5e8, radius: 1.9, orbitRadius: 55, speed: 0.0016 },
        { name: "Beastlands", color: 0x66bb6a, radius: 1.7, orbitRadius: 42, speed: 0.004 },
        { name: "Arborea", color: 0xba68c8, radius: 1.8, orbitRadius: 48, speed: 0.0024 },
        { name: "Ysgard", color: 0xff9800, radius: 1.6, orbitRadius: 44, speed: 0.0048 },
        { name: "Limbo", color: 0x78909c, radius: 1.5, orbitRadius: 40, speed: 0.0064 },
        { name: "Pandemonium", color: 0x8d6e63, radius: 1.4, orbitRadius: 38, speed: 0.0072 }
      ],
      
      // Outer Infernal Ring (8 hells orbiting)
      infernal_ring: [
        { name: "Avernus", color: 0xff5722, radius: 1.8, orbitRadius: 70, speed: -0.0032 },
        { name: "Dis", color: 0xe64a19, radius: 1.7, orbitRadius: 72, speed: -0.0028 },
        { name: "Erebus", color: 0xd84315, radius: 1.6, orbitRadius: 74, speed: -0.0024 },
        { name: "Phlegethon", color: 0xbf360c, radius: 1.5, orbitRadius: 76, speed: -0.002 },
        { name: "Stygia", color: 0xa6200c, radius: 1.4, orbitRadius: 78, speed: -0.0016 },
        { name: "Malbolge", color: 0x8f1500, radius: 1.3, orbitRadius: 80, speed: -0.0012 },
        { name: "Maladomini", color: 0x7b0e00, radius: 1.2, orbitRadius: 82, speed: -0.0008 },
        { name: "Cania", color: 0x660800, radius: 1.1, orbitRadius: 84, speed: -0.00064 }
      ],
      
      // Throne of Accord (Above)
      throne_accord: {
        name: "Throne of Accord",
        type: "celestial",
        color: 0xffffcc,
        radius: 3.5,
        position: { x: 0, y: 25, z: 0 },
        description: "The seat of Calan'thir's divine justice, where cosmic law emanates to maintain the balance of all realities.",
        linkedEntity: "Calan'thir"
      },
      
      // Nessus (deepest hell - fixed below Material Plane)
      nessus: {
        name: "Nessus",
        type: "infernal",
        color: 0x4e0000,
        radius: 3.2,
        position: { x: 0, y: -25, z: 0 },
        description: "The deepest circle of Hell, domain of Asmodeus the Fallen. Anchored directly opposite the Throne of Accord.",
        linkedEntity: "Asmodeus"
      }
    };

    // ===== THREE.JS SETUP =====
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 2000);
    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.setClearColor(0x000000, 1);
    document.body.appendChild(renderer.domElement);

    // ===== COSMIC BACKGROUND =====
    const starGeometry = new THREE.BufferGeometry();
    const starVertices = [];
    for (let i = 0; i < 10000; i++) {
      const x = (Math.random() - 0.5) * 4000;
      const y = (Math.random() - 0.5) * 4000;
      const z = (Math.random() - 0.5) * 4000;
      starVertices.push(x, y, z);
    }
    starGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starVertices, 3));
    
    const starMaterial = new THREE.PointsMaterial({
      color: 0xffffff,
      size: 2,
      transparent: true,
      opacity: 0.8
    });
    
    const stars = new THREE.Points(starGeometry, starMaterial);
    scene.add(stars);

    // ===== ORBITAL RING GUIDES =====
    function createOrbitRing(radius, color, opacity = 0.1) {
      const ringGeometry = new THREE.RingGeometry(radius - 0.5, radius + 0.5, 64);
      const ringMaterial = new THREE.MeshBasicMaterial({
        color: color,
        transparent: true,
        opacity: opacity,
        side: THREE.DoubleSide
      });
      const ring = new THREE.Mesh(ringGeometry, ringMaterial);
      ring.rotation.x = Math.PI / 2;
      scene.add(ring);
      return ring;
    }

    // Create orbital guide rings
    createOrbitRing(25, 0xff6600, 0.05); // Fire ring
    createOrbitRing(30, 0x3399ff, 0.05); // Water ring  
    createOrbitRing(35, 0xffffff, 0.03); // Air ring
    createOrbitRing(28, 0x8b4513, 0.05); // Earth ring
    createOrbitRing(45, 0xffd700, 0.08); // Celestial inner
    createOrbitRing(55, 0xffd700, 0.06); // Celestial outer
    createOrbitRing(60, 0xcc66ff, 0.04); // Primordial inner
    createOrbitRing(65, 0xcc66ff, 0.04); // Primordial outer
    createOrbitRing(75, 0xff4444, 0.06); // Infernal inner
    createOrbitRing(85, 0xff4444, 0.04); // Infernal outer

    // ===== LIGHTING SYSTEM =====
    const ambientLight = new THREE.AmbientLight(0x404080, 0.4);
    scene.add(ambientLight);

    // Central radiant light from Material Plane
    const centralLight = new THREE.PointLight(0x4fc3f7, 2, 200);
    centralLight.position.set(0, 0, 0);
    scene.add(centralLight);

    // Celestial light from above
    const celestialLight = new THREE.PointLight(0xffd700, 1.5, 150);
    celestialLight.position.set(0, 50, 0);
    scene.add(celestialLight);

    // Infernal glow from outer ring
    const infernalLight = new THREE.PointLight(0xff3300, 1, 300);
    infernalLight.position.set(0, -10, 0);
    scene.add(infernalLight);

    // ===== INTERACTION SETUP =====
    const tooltip = document.getElementById('tooltip');
    const raycaster = new THREE.Raycaster();
    const mouse = new THREE.Vector2();
    const celestialObjects = [];
    const orbitalGroups = [];
    let animationPaused = false;

    // Camera controls
    let isDragging = false;
    let previousMousePosition = { x: 0, y: 0 };
    let cameraRotation = { x: 0.2, y: 0 };
    let cameraDistance = 120;

    // ===== ENHANCED REALM CREATION =====
    function createPlanarBody(config) {
      // Main sphere
      const geometry = new THREE.SphereGeometry(config.radius, 32, 32);
      const material = new THREE.MeshStandardMaterial({
        color: config.color,
        emissive: config.color,
        emissiveIntensity: 0.3,
        roughness: 0.4,
        metalness: 0.1
      });
      
      const body = new THREE.Mesh(geometry, material);
      body.userData = {
        name: config.name,
        description: config.description || `${config.name} - A realm of the Decennium Descent cosmology`,
        type: config.type || 'planar',
        linkedEntity: config.linkedEntity
      };

      // Glow effect
      const glowGeometry = new THREE.SphereGeometry(config.radius * 1.4, 16, 16);
      const glowMaterial = new THREE.MeshBasicMaterial({
        color: config.color,
        transparent: true,
        opacity: 0.15
      });
      const glow = new THREE.Mesh(glowGeometry, glowMaterial);

      // Create group for body + glow
      const group = new THREE.Group();
      group.add(body);
      group.add(glow);

      celestialObjects.push(body);

      // Position logic
      if (config.position) {
        group.position.set(config.position.x, config.position.y, config.position.z);
        scene.add(group);
      } else if (config.chaotic) {
        // Plane of Chaos chaotic movement
        const chaoticAngle = Math.random() * Math.PI * 2;
        const chaoticRadius = 50 + Math.random() * (config.chaoticRange - 50);
        const chaoticY = (Math.random() - 0.5) * 30;
        
        group.position.set(
          Math.cos(chaoticAngle) * chaoticRadius,
          chaoticY,
          Math.sin(chaoticAngle) * chaoticRadius
        );
        scene.add(group);
        
        orbitalGroups.push({
          group: group,
          body: body,
          bodyGroup: group,
          chaotic: true,
          chaoticSpeed: config.chaoticSpeed,
          chaoticRange: config.chaoticRange,
          chaoticAngle: chaoticAngle,
          chaoticRadius: chaoticRadius,
          chaoticY: chaoticY,
          chaoticDirection: (Math.random() - 0.5) * 2,
          chaoticYDirection: (Math.random() - 0.5) * 0.002,
          nextChaosChange: Date.now() + Math.random() * 5000
        });
      } else if (config.orbitRadius) {
        const orbitGroup = new THREE.Group();
        const angle = config.angleOffset || Math.random() * Math.PI * 2;
        
        group.position.set(config.orbitRadius, 0, 0);
        orbitGroup.add(group);
        orbitGroup.rotation.y = angle;
        scene.add(orbitGroup);
        
        orbitalGroups.push({
          group: orbitGroup,
          body: body,
          bodyGroup: group,
          orbitRadius: config.orbitRadius,
          speed: config.speed || 0.001,
          angle: angle
        });
      }

      return body;
    }

    // ===== CREATE ALL REALMS =====
    
    // Material Plane (center)
    createPlanarBody(COSMOLOGY_CONFIG.material_plane);

    // Elemental Ring
    COSMOLOGY_CONFIG.elemental_ring.forEach(realm => {
      realm.type = 'elemental';
      createPlanarBody(realm);
    });

    // Primordial Ring (3 orderly planes)
    COSMOLOGY_CONFIG.primordial_ring.forEach(realm => {
      realm.type = 'primordial';
      createPlanarBody(realm);
    });

    // Plane of Chaos (chaotic wanderer)
    createPlanarBody(COSMOLOGY_CONFIG.plane_of_chaos);

    // Celestial Ring
    COSMOLOGY_CONFIG.celestial_ring.forEach(realm => {
      realm.type = 'celestial';
      realm.description = `${realm.name} - One of the celestial realms where good-aligned souls find their eternal reward`;
      createPlanarBody(realm);
    });

    // Infernal Ring (8 hells orbiting)
    COSMOLOGY_CONFIG.infernal_ring.forEach(realm => {
      realm.type = 'infernal';
      realm.description = `${realm.name} - One of the eight circles of Hell orbiting around the cosmic axis`;
      createPlanarBody(realm);
    });

    // Nessus (fixed deepest hell)
    createPlanarBody(COSMOLOGY_CONFIG.nessus);

    // Throne of Accord
    createPlanarBody(COSMOLOGY_CONFIG.throne_accord);

    // ===== MOUSE INTERACTIONS =====
    function onMouseMove(event) {
      if (!isDragging) {
        mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
        mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
        
        raycaster.setFromCamera(mouse, camera);
        const intersects = raycaster.intersectObjects(celestialObjects);
        
        if (intersects.length > 0) {
          const obj = intersects[0].object;
          const userData = obj.userData;
          
          tooltip.innerHTML = `
            <strong>${userData.name}</strong><br>
            ${userData.description}
            ${userData.linkedEntity ? `<br><em>Linked to: ${userData.linkedEntity}</em>` : ''}
          `;
          
          tooltip.className = `tooltip-${userData.type}`;
          tooltip.style.left = Math.min(event.clientX + 15, window.innerWidth - 320) + 'px';
          tooltip.style.top = event.clientY + 15 + 'px';
          tooltip.style.display = 'block';
        } else {
          tooltip.style.display = 'none';
        }
      }

      if (isDragging) {
        const deltaMove = {
          x: event.clientX - previousMousePosition.x,
          y: event.clientY - previousMousePosition.y
        };

        cameraRotation.y -= deltaMove.x * 0.005;
        cameraRotation.x -= deltaMove.y * 0.005;
        cameraRotation.x = Math.max(-Math.PI/3, Math.min(Math.PI/3, cameraRotation.x));
      }

      previousMousePosition = { x: event.clientX, y: event.clientY };
    }

    function onMouseDown(event) {
      isDragging = true;
      tooltip.style.display = 'none';
    }

    function onMouseUp(event) {
      isDragging = false;
    }

    function onWheel(event) {
      event.preventDefault();
      cameraDistance += event.deltaY * 0.1;
      cameraDistance = Math.max(40, Math.min(300, cameraDistance));
    }

    function onKeyDown(event) {
      if (event.code === 'Space') {
        event.preventDefault();
        animationPaused = !animationPaused;
      }
    }

    window.addEventListener('mousemove', onMouseMove);
    window.addEventListener('mousedown', onMouseDown);
    window.addEventListener('mouseup', onMouseUp);
    window.addEventListener('wheel', onWheel);
    window.addEventListener('keydown', onKeyDown);

    // ===== CAMERA SETUP =====
    camera.position.set(0, 30, cameraDistance);
    camera.lookAt(0, 0, 0);

    // ===== ANIMATION LOOP =====
    function animate() {
      requestAnimationFrame(animate);

      if (!animationPaused) {
        // Orbital motion
        orbitalGroups.forEach(orb => {
          if (orb.chaotic) {
            // Plane of Chaos chaotic movement with collision avoidance
            const now = Date.now();
            
            // Change direction randomly
            if (now > orb.nextChaosChange) {
              orb.chaoticDirection = (Math.random() - 0.5) * 2;
              orb.chaoticYDirection = (Math.random() - 0.5) * 0.002;
              orb.nextChaosChange = now + 2000 + Math.random() * 8000;
            }
            
            orb.chaoticAngle += orb.chaoticSpeed * orb.chaoticDirection;
            orb.chaoticRadius += Math.sin(orb.chaoticAngle * 3) * 0.5;
            orb.chaoticY += orb.chaoticYDirection;
            
            // Keep within bounds
            orb.chaoticRadius = Math.max(45, Math.min(orb.chaoticRange, orb.chaoticRadius));
            orb.chaoticY = Math.max(-40, Math.min(40, orb.chaoticY));
            
            // Simple collision avoidance - if too close to any other object, change direction
            const chaosPos = new THREE.Vector3(
              Math.cos(orb.chaoticAngle) * orb.chaoticRadius,
              orb.chaoticY,
              Math.sin(orb.chaoticAngle) * orb.chaoticRadius
            );
            
            let tooClose = false;
            celestialObjects.forEach(obj => {
              if (obj !== orb.body) {
                const dist = chaosPos.distanceTo(obj.position);
                if (dist < 15) { // Minimum safe distance
                  tooClose = true;
                }
              }
            });
            
            if (tooClose) {
              orb.chaoticDirection *= -1.5;
              orb.chaoticYDirection *= -1.2;
            }
            
            orb.group.position.x = chaosPos.x;
            orb.group.position.y = chaosPos.y;
            orb.group.position.z = chaosPos.z;
          } else if (orb.orbitRadius) {
            orb.angle += orb.speed;
            orb.group.rotation.y = orb.angle;
          }
        });

        // Gentle rotation of stars
        stars.rotation.y += 0.0002;
        stars.rotation.x += 0.0001;
      }

      // Update camera position
      camera.position.x = cameraDistance * Math.sin(cameraRotation.y) * Math.cos(cameraRotation.x);
      camera.position.y = cameraDistance * Math.sin(cameraRotation.x);
      camera.position.z = cameraDistance * Math.cos(cameraRotation.y) * Math.cos(cameraRotation.x);
      camera.lookAt(0, 0, 0);

      renderer.render(scene, camera);
    }

    animate();

    // ===== RESPONSIVE DESIGN =====
    window.addEventListener('resize', () => {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });
  </script>
</body>
</html>